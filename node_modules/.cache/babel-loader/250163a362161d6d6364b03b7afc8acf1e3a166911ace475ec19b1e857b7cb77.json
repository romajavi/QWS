{"ast":null,"code":"import React,{useCallback,useState,useEffect}from'react';import{useTranslation}from'react-i18next';import styled,{keyframes}from'styled-components';import{useAnimationController}from'../utils/animationController.js';// Mantenemos la animación original de deslizamiento\nimport{jsx as _jsx}from\"react/jsx-runtime\";const slideIn=keyframes`\n  from {\n    transform: translateX(-100%) scale(1);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0) scale(1);\n    opacity: 1;\n  }\n`;// Contenedor principal con animación condicional\nconst LanguageSelectorContainer=styled.div`\n  position: fixed;\n  left: 0;\n  top: 140px;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  z-index: 1000;\n  background: ${props=>props.theme.colors.cardBackground};\n  padding: 8px;\n  border-radius: 0 8px 8px 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  border: 1px solid ${props=>props.theme.colors.secondaryBackground}40;\n  transform-origin: left center;\n  animation: ${props=>props.$shouldAnimate?slideIn:'none'} 0.6s ease-out forwards;\n  opacity: ${props=>props.$shouldAnimate?0:1};\n  will-change: transform, opacity;\n\n  @media (max-width: 768px) {\n    top: 150px;\n    transform: scale(0.7);\n    padding: 6px;\n    gap: 3px;\n  }\n`;// Botón de idioma mejorado con props transientes\nconst LanguageButton=styled.button`\n  width: 40px;\n  height: 40px;\n  border: none;\n  border-radius: 50%;\n  padding: 5px;\n  cursor: pointer;\n  background: transparent;\n  opacity: ${props=>props.$isActive?1:0.3};\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  \n  &:hover {\n    transform: scale(1.3);\n    opacity: 1;\n  }\n  \n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 2px ${props=>props.theme.colors.accent};\n  }\n  \n  &:active {\n    transform: scale(0.95);\n  }\n  \n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: 50%;\n    transform: translateZ(0); // Optimización GPU\n  }\n\n  @media (max-width: 768px) {\n    width: 28px;\n    height: 28px;\n    padding: 3px;\n    \n    &:hover {\n      transform: scale(1.2);\n    }\n  }\n`;// Configuración de idiomas\nconst LANGUAGES={es:{flag:\"/images/flags/es.png\",label:\"Español\"},en:{flag:\"/images/flags/gb.png\",label:\"English\"},pt:{flag:\"/images/flags/br.png\",label:\"Português\"}};const LanguageSelector=()=>{const{i18n}=useTranslation();const{shouldAnimate,animationLevel}=useAnimationController();const[isVisible,setIsVisible]=useState(false);// Efecto para manejar la visibilidad inicial\nuseEffect(()=>{const timer=setTimeout(()=>{setIsVisible(true);},100);return()=>clearTimeout(timer);},[]);// Función optimizada para cambio de idioma\nconst changeLanguage=useCallback(lng=>{// Prevenimos cambios innecesarios\nif(i18n.language===lng)return;// Actualizamos el idioma\ni18n.changeLanguage(lng);document.documentElement.lang=lng;localStorage.setItem('i18nextLng',lng);// Efecto de retroalimentación táctil en dispositivos móviles si está disponible\nif(window.navigator.vibrate){window.navigator.vibrate(50);}},[i18n]);// Optimización de renderizado para las banderas\nconst renderLanguageButtons=useCallback(()=>{return Object.entries(LANGUAGES).map(_ref=>{let[code,{flag,label}]=_ref;const isActive=i18n.language===code;return/*#__PURE__*/_jsx(LanguageButton,{onClick:()=>changeLanguage(code),$isActive:isActive,title:label,\"aria-label\":`Cambiar idioma a ${label}`,role:\"button\",tabIndex:0,children:/*#__PURE__*/_jsx(\"img\",{src:flag,alt:`${label} flag`,loading:\"lazy\",width:\"40\",height:\"40\"})},code);});},[i18n.language,changeLanguage]);// Solo renderizamos si es visible\nif(!isVisible)return null;return/*#__PURE__*/_jsx(LanguageSelectorContainer,{$shouldAnimate:shouldAnimate&&animationLevel!=='minimal',role:\"region\",\"aria-label\":\"Selector de idioma\",children:renderLanguageButtons()});};// Exportamos el componente memorizado\nexport default/*#__PURE__*/React.memo(LanguageSelector);","map":{"version":3,"names":["React","useCallback","useState","useEffect","useTranslation","styled","keyframes","useAnimationController","jsx","_jsx","slideIn","LanguageSelectorContainer","div","props","theme","colors","cardBackground","secondaryBackground","$shouldAnimate","LanguageButton","button","$isActive","accent","LANGUAGES","es","flag","label","en","pt","LanguageSelector","i18n","shouldAnimate","animationLevel","isVisible","setIsVisible","timer","setTimeout","clearTimeout","changeLanguage","lng","language","document","documentElement","lang","localStorage","setItem","window","navigator","vibrate","renderLanguageButtons","Object","entries","map","_ref","code","isActive","onClick","title","role","tabIndex","children","src","alt","loading","width","height","memo"],"sources":["C:/Users/roman/OneDrive/Escritorio/Programador/QWS/Quantum Web Services/quantum-web-services/src/components/LanguageSelector.js"],"sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport styled, { keyframes } from 'styled-components';\r\nimport { useAnimationController } from '../utils/animationController.js';\r\n\r\n// Mantenemos la animación original de deslizamiento\r\nconst slideIn = keyframes`\r\n  from {\r\n    transform: translateX(-100%) scale(1);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0) scale(1);\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\n// Contenedor principal con animación condicional\r\nconst LanguageSelectorContainer = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  top: 140px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  z-index: 1000;\r\n  background: ${props => props.theme.colors.cardBackground};\r\n  padding: 8px;\r\n  border-radius: 0 8px 8px 0;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\r\n  border: 1px solid ${props => props.theme.colors.secondaryBackground}40;\r\n  transform-origin: left center;\r\n  animation: ${props => props.$shouldAnimate ? slideIn : 'none'} 0.6s ease-out forwards;\r\n  opacity: ${props => props.$shouldAnimate ? 0 : 1};\r\n  will-change: transform, opacity;\r\n\r\n  @media (max-width: 768px) {\r\n    top: 150px;\r\n    transform: scale(0.7);\r\n    padding: 6px;\r\n    gap: 3px;\r\n  }\r\n`;\r\n\r\n// Botón de idioma mejorado con props transientes\r\nconst LanguageButton = styled.button`\r\n  width: 40px;\r\n  height: 40px;\r\n  border: none;\r\n  border-radius: 50%;\r\n  padding: 5px;\r\n  cursor: pointer;\r\n  background: transparent;\r\n  opacity: ${props => props.$isActive ? 1 : 0.3};\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n  \r\n  &:hover {\r\n    transform: scale(1.3);\r\n    opacity: 1;\r\n  }\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    box-shadow: 0 0 0 2px ${props => props.theme.colors.accent};\r\n  }\r\n  \r\n  &:active {\r\n    transform: scale(0.95);\r\n  }\r\n  \r\n  img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n    border-radius: 50%;\r\n    transform: translateZ(0); // Optimización GPU\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 28px;\r\n    height: 28px;\r\n    padding: 3px;\r\n    \r\n    &:hover {\r\n      transform: scale(1.2);\r\n    }\r\n  }\r\n`;\r\n\r\n// Configuración de idiomas\r\nconst LANGUAGES = {\r\n  es: {\r\n    flag: \"/images/flags/es.png\",\r\n    label: \"Español\"\r\n  },\r\n  en: {\r\n    flag: \"/images/flags/gb.png\",\r\n    label: \"English\"\r\n  },\r\n  pt: {\r\n    flag: \"/images/flags/br.png\",\r\n    label: \"Português\"\r\n  }\r\n};\r\n\r\nconst LanguageSelector = () => {\r\n  const { i18n } = useTranslation();\r\n  const { shouldAnimate, animationLevel } = useAnimationController();\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // Efecto para manejar la visibilidad inicial\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsVisible(true);\r\n    }, 100);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  // Función optimizada para cambio de idioma\r\n  const changeLanguage = useCallback((lng) => {\r\n    // Prevenimos cambios innecesarios\r\n    if (i18n.language === lng) return;\r\n\r\n    // Actualizamos el idioma\r\n    i18n.changeLanguage(lng);\r\n    document.documentElement.lang = lng;\r\n    localStorage.setItem('i18nextLng', lng);\r\n\r\n    // Efecto de retroalimentación táctil en dispositivos móviles si está disponible\r\n    if (window.navigator.vibrate) {\r\n      window.navigator.vibrate(50);\r\n    }\r\n  }, [i18n]);\r\n\r\n  // Optimización de renderizado para las banderas\r\n  const renderLanguageButtons = useCallback(() => {\r\n    return Object.entries(LANGUAGES).map(([code, { flag, label }]) => {\r\n      const isActive = i18n.language === code;\r\n\r\n      return (\r\n        <LanguageButton\r\n          key={code}\r\n          onClick={() => changeLanguage(code)}\r\n          $isActive={isActive}\r\n          title={label}\r\n          aria-label={`Cambiar idioma a ${label}`}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n        >\r\n          <img\r\n            src={flag}\r\n            alt={`${label} flag`}\r\n            loading=\"lazy\"\r\n            width=\"40\"\r\n            height=\"40\"\r\n          />\r\n        </LanguageButton>\r\n      );\r\n    });\r\n  }, [i18n.language, changeLanguage]);\r\n\r\n  // Solo renderizamos si es visible\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <LanguageSelectorContainer\r\n      $shouldAnimate={shouldAnimate && animationLevel !== 'minimal'}\r\n      role=\"region\"\r\n      aria-label=\"Selector de idioma\"\r\n    >\r\n      {renderLanguageButtons()}\r\n    </LanguageSelectorContainer>\r\n  );\r\n};\r\n\r\n// Exportamos el componente memorizado\r\nexport default React.memo(LanguageSelector);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}